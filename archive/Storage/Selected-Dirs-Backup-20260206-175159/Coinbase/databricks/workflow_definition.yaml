# Databricks Workflow Definition (Orchestration)
# Pipeline: Coinbase End-to-End Analytics

name: "Coinbase Analytics Pipeline"
tasks:
  - task_key: "Ingestion_Bronze"
    notebook_task:
      notebook_path: "/Coinbase/ingestion/01_bronze_ingestion"
    new_cluster: cluster_config

  - task_key: "Transformation_Silver"
    depends_on:
      - task_key: "Ingestion_Bronze"
    notebook_task:
      notebook_path: "/Coinbase/transformation/02_silver_transform"
    existing_cluster_id: cluster_id

  - task_key: "Feature_Engineering"
    depends_on:
      - task_key: "Transformation_Silver"
    notebook_task:
      notebook_path: "/Coinbase/features/03_feature_engineering"
    existing_cluster_id: cluster_id

  - task_key: "ML_Modeling"
    depends_on:
      - task_key: "Feature_Engineering"
    notebook_task:
      notebook_path: "/Coinbase/modeling/04_ml_modeling"
    existing_cluster_id: cluster_id
