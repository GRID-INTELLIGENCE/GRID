# GRID - Geometric Resonance Intelligence Driver

<div align="center">

[![Tests](https://github.com/caraxesthebloodwyrm02/GRID/actions/workflows/minimal-ci.yml/badge.svg?branch=main)](https://github.com/caraxesthebloodwyrm02/GRID/actions/workflows/minimal-ci.yml)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python 3.13+](https://img.shields.io/badge/python-3.13%2B-blue.svg)](https://www.python.org/downloads/)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)

[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](https://github.com/caraxesthebloodwyrm02/GRID/pulls)
[![Maintained](https://img.shields.io/badge/Maintained%3F-yes-green.svg)](https://github.com/caraxesthebloodwyrm02/GRID/graphs/commit-activity)
[![Made with Love](https://img.shields.io/badge/Made%20with-â¤ï¸-red.svg)](https://github.com/caraxesthebloodwyrm02/GRID)

</div>

<div align="center">

### ğŸ¯ Local-First AI Â· ğŸ”’ Privacy-First Â· âš¡ Production-Ready

</div>

## ğŸ¬ Interactive Demo

<div align="center">

### ğŸŒ **[Try Live Demo â†’](https://grid-intelligence.netlify.app)**

[![GRID Landing Page](https://img.shields.io/badge/ğŸŒ_Live_Demo-Visit_Now-00D9FF?style=for-the-badge&logo=netlify&logoColor=white)](https://grid-intelligence.netlify.app)
[![Deployment](https://img.shields.io/badge/Deployment-Active-success?style=for-the-badge&logo=vercel)](https://grid-intelligence.netlify.app)

</div>

<details>
<summary><b>ğŸ“º Watch the Terminal Demo</b> (Click to expand)</summary>

<br>

The landing page features an **interactive terminal simulation** that demonstrates GRID's code analysis capabilities in real-time. Here's what you'll see:

```bash
$ grid analyze src/

ğŸ” Analyzing codebase structure...
âœ“ Found 142 Python files
âœ“ Detected 89 classes, 437 functions
âœ“ Mapped 12 core modules

ğŸ“Š Complexity Analysis:
  â€¢ Cyclomatic complexity: 8.2 avg (healthy)
  â€¢ Maintainability index: 76/100 (good)
  â€¢ Code duplication: 3.1% (low)

ğŸ§  Pattern Recognition:
  â€¢ Flow patterns: Event-driven architecture (15 events)
  â€¢ Spatial patterns: Layered DDD structure (4 layers)
  â€¢ Cause patterns: 23 dependency chains detected

ğŸ’¡ Recommendations:
  1. Extract shared logic in auth module â†’ reduce duplication by 40%
  2. Consider breaking down UserService (complexity: 12) â†’ target: <10
  3. Add integration tests for payment flows â†’ coverage gap detected

âœ¨ Analysis complete in 2.3s
```

<div align="center">

**[â†’ See it in action on the live site](https://grid-intelligence.netlify.app#demo)**

</div>

</details>

<details>
<summary><b>âœ¨ Landing Page Features</b> (Click to expand)</summary>

<br>

### What's Inside

- ğŸ¯ **Interactive Terminal** - Real-time code analysis simulation with typing effects
- ğŸ“Š **Visual Insights** - Pattern recognition and complexity metrics display
- ğŸ¤– **AI-Powered** - Local-first intelligence with Ollama (no external APIs)
- ğŸ”’ **Privacy-First** - Your code never leaves your machine
- ğŸ¨ **Dark Mode** - Beautiful dark/light theme toggle
- ğŸ“± **Responsive** - Fully mobile-optimized design
- âš¡ **Fast** - Performance-optimized with lazy loading

### Sections

- **Hero** - Eye-catching introduction with metrics (2.3M+ parameters, 500k+ stars)
- **Features** - Comprehensive overview of capabilities
- **Pricing** - Beta signup and tier comparison
- **About** - Project evolution story and philosophy
- **FAQ** - Simplified, accessible answers to common questions

<div align="center">

**Located in:** `landing/` directory | **Deployed on:** Netlify

</div>

</details>

---

## ğŸ“Š Project Stats

<div align="center">

| ğŸ¯ Metric | ğŸ“ˆ Value | ğŸ¯ Metric | ğŸ“ˆ Value |
|-----------|----------|-----------|----------|
| **Python Version** | 3.13+ | **Tests Passing** | 137+ âœ… |
| **Code Coverage** | â‰¥80% | **Architecture** | DDD + Event-Driven |
| **Security** | Production-Ready | **RAG Precision** | +33-40% |
| **Workflows** | âœ… Passing | **Package Manager** | UV |

</div>

<div align="center">

### ğŸš€ Quick Stats

![Lines of Code](https://img.shields.io/badge/Lines%20of%20Code-50k%2B-blue?style=flat-square)
![Files](https://img.shields.io/badge/Files-540%2B-green?style=flat-square)
![Tests](https://img.shields.io/badge/Tests-137%2B-success?style=flat-square)
![Coverage](https://img.shields.io/badge/Coverage-â‰¥80%25-brightgreen?style=flat-square)

</div>

---

## Overview

GRID (Geometric Resonance Intelligence Driver) is a comprehensive framework for exploring and understanding complex systems through:

- **Geometric Resonance Patterns**: Core intelligence engine with 9 cognition patterns (Flow, Spatial, Rhythm, Color, Repetition, Deviation, Cause, Time, Combination)
- **Cognitive Decision Support**: Light of the Seven cognitive architecture for bounded rationality and human-centered AI
- **Local-First RAG**: Retrieval-Augmented Generation with ChromaDB + Ollama (no external APIs)
- **Intelligent Skills Ecosystem**: Self-organizing framework with automated discovery, persistent intelligence, and performance guarding (Phases 1-4)
- **Event-Driven Agentic System**: Complete case management workflow with continuous learning
- **Domain-Driven Design**: Professional architectural patterns with service layer decoupling

## ğŸš€ What's New (January 2026)

### Major Enhancements:

- âœ… **Authentication & Security** - Production credential validation with bcrypt, JWT token revocation list, account lockout protection
- âœ… **Billing & Usage** - Tier-based subscription management with automatic overage calculation
- âœ… **Security Hardening** - Comprehensive path traversal protection and validation
- âœ… **Advanced RAG System** - 4-phase optimization with semantic chunking, hybrid search, cross-encoder reranking
- âœ… **Enhanced Testing** - 137+ tests passing with 15/15 Unified Fabric cases
- âœ… **Windows Compatibility** - Fixed pre-commit hooks and cross-platform path handling
- âœ… **Performance Monitoring** - Real-time system metrics and optimization
- âœ… **Dynamic Unified Fabric** - Event-driven architecture with distributed AI Safety across E:/
- âœ… **Databricks Scaffold** - Native Coinbase analytics pipeline architecture

### New Capabilities:

- **Automatic Overage Billing**: Usage-based charges when exceeding tier limits (relationship analysis, entity extraction)
- **Path Traversal Protection**: Robust security validation for all file operations
- **Semantic Chunking**: Context-aware document splitting for better RAG coherence
- **Hybrid Search**: BM25 + Vector fusion for improved recall and precision
- **Cross-Encoder Reranking**: 33-40% precision improvement with ms-marco-MiniLM-L6-v2
- **Evaluation Metrics**: Automated Context Relevance scoring and quality tracking
- **Distributed AI Safety**: `AISafetyBridge` for cross-project safety validation (wellness_studio â†’ E:/)
- **Automatic Revenue Pipeline**: End-to-end signal-to-execution flow with multi-system auditing

## Installation

**This repo uses UV as the Python venv/package manager.** Do not use `python -m venv` or `pip` directlyâ€”use UV for all venv and package operations.

### Quick setup with UV (recommended)

```powershell
Set-Location e:\grid
uv venv --python 3.13 --clear
.\.venv\Scripts\Activate.ps1
uv sync --group dev --group test
```

> [!NOTE]
> When running `python -m grid` manually from the root, ensure the `src` directory is in your `PYTHONPATH`:
> `$env:PYTHONPATH="src"; python -m grid --help`

### Legacy setup (not recommended)

```bash
python -m venv .venv
source .venv/bin/activate  # On Windows: .\.venv\Scripts\Activate.ps1
pip install -e .
```

## UV usage (per-repo)

See `docs/UV_USAGE.md` for full copy-paste commands. Quick root setup with uv:

```powershell
Set-Location e:\grid
uv venv --python 3.13 --clear
.\.venv\Scripts\Activate.ps1
uv sync --group dev --group test
```

## Key Components

### Core Intelligence

- **Circuits**: Constraint-based pathway lighting system
- **Physics**: Spacetime geometry framework for non-Euclidean grids
- **RAG**: Retrieval-Augmented Generation system (ChromaDB + Ollama)
- **Cognitive Layer**: Decision support, mental models, and navigation (Light of the Seven)
- **Resonance API**: Real-time activity processing with adaptive feedback

### New Systems (2026)

- **ğŸ” Authentication & Billing**: JWT-based auth with token revocation, tier-based subscriptions with usage tracking
- **ğŸ¤– Agentic System**: Event-driven case management with continuous learning
- **ğŸ—ï¸ DDD Architecture**: Domain-driven design with service layer decoupling
- **ğŸ“ Organized Structure**: Clean root directory with logical organization
- **ğŸ—ï¸ Unified Fabric**: High-performance async event bus and distributed safety layer

### Visualization & Tools

- **Visualization**: Interactive data visualization tools
- **Arena (The Chase)**: Simulation + referee lab with diagnostics CLI
- **Workspace**: MCP servers and development tools

## Project Structure (2026)

The project has been reorganized with a clean, maintainable structure:

### ğŸ“ Root Directory (Essential Files Only)

```
e:\grid/
â”œâ”€â”€ src/                    # All source code
â”œâ”€â”€ tests/                  # Test suite
â”œâ”€â”€ docs/                   # Core documentation
â”œâ”€â”€ config/                 # Configuration files
â”œâ”€â”€ scripts/                # Build and development scripts
â”œâ”€â”€ tools/                  # Development tools
â”œâ”€â”€ workspace/              # MCP workspace
â”œâ”€â”€ landing/                # Landing page (HTML/CSS/JS)
â””â”€â”€ pyproject.toml         # Project configuration
```

### ğŸ“ New Organized Directories

```
â”œâ”€â”€ dev/                    # Development files
â”‚   â”œâ”€â”€ debug/             # Debug scripts
â”‚   â”œâ”€â”€ patches/           # Patch files
â”‚   â”œâ”€â”€ logs/              # Development logs
â”‚   â””â”€â”€ temp/              # Temporary files
â”œâ”€â”€ reports/                # Reports and analysis
â”‚   â”œâ”€â”€ analysis/          # Analysis reports
â”‚   â”œâ”€â”€ integration/       # Integration test failures
â”‚   â”œâ”€â”€ checkpoints/       # Project checkpoints
â”‚   â””â”€â”€ daily/             # Daily reports
â””â”€â”€ docs-ext/              # Extended documentation
    â”œâ”€â”€ guides/            # Implementation guides
    â””â”€â”€ workflows/         # Workflow documentation
```

### ğŸ“¦ Source Code Structure

```
src/
â”œâ”€â”€ grid/                   # Core intelligence package
â”‚   â”œâ”€â”€ agentic/           # Event-driven agentic system
â”‚   â”œâ”€â”€ context/           # User context management
â”‚   â”œâ”€â”€ workflow/          # Workflow orchestration
â”‚   â””â”€â”€ io/                # Input/output handling
â”œâ”€â”€ application/           # FastAPI applications
â”œâ”€â”€ tools/                  # Development tools (RAG, utilities)
â”œâ”€â”€ cognitive/              # Cognitive architecture
â””â”€â”€ unified_fabric/         # Event-driven core & AI Safety bridge
```

## Skills + RAG (Quickstart)

**Local-First RAG System** (ChromaDB + Ollama - no external APIs):

```bash
# Query knowledge base
python -m tools.rag.cli query "How does pattern recognition work?"

# Index/rebuild documentation
python -m tools.rag.cli index docs/ --rebuild --curate

# List available skills (Auto-discovered)
python -m grid skills list

# Run a skill with JSON args (Performance-tracked)
python -m grid skills run transform.schema_map --args-json '{"text":"...", "target_schema":"resonance"}'
```

See [`docs/INTELLIGENT_SKILLS_SYSTEM.md`](docs/INTELLIGENT_SKILLS_SYSTEM.md) for details on the automated discovery and management layer.

### Resonance API

The Resonance API provides a "canvas flip" checkpoint for mid-process alignment:

```bash
# Start the server
python -m application.mothership.main

# Call the definitive endpoint
curl -X POST http://localhost:8080/api/v1/resonance/definitive \
  -H "Content-Type: application/json" \
  -d '{"query": "Where do these features connect?", "progress": 0.65}'

# Process activity with cognitive support
curl -X POST http://localhost:8080/api/v1/resonance/process \
  -H "Content-Type: application/json" \
  -d '{"query": "create a new service", "activity_type": "code"}'
```

### ğŸ” Authentication & Billing (NEW)

Secure authentication and subscription management with usage tracking:

```bash
# Authenticate and get tokens
curl -X POST http://localhost:8080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "user", "password": "pass", "scopes": ["read", "write"]}'

# Validate token
curl http://localhost:8080/api/v1/auth/validate \
  -H "Authorization: Bearer <access_token>"

# Logout (revokes token)
curl -X POST http://localhost:8080/api/v1/auth/logout \
  -H "Authorization: Bearer <access_token>"
```

**Features:**
- **Production Credential Validation**: bcrypt password hashing with PostgreSQL integration
- **JWT Token Management**: Access/refresh tokens with automatic expiration
- **Token Revocation List**: JWT blacklisting for secure logout
- **Account Protection**: Failed attempt tracking and automatic lockout
- **Usage Tracking**: Per-user resource consumption monitoring
- **Overage Calculation**: Automatic billing for usage beyond tier limits

### ğŸ¤– Agentic System (NEW)

The Event-Driven Agentic System implements a receptionist-lawyer-client workflow for structured case processing:

```bash
# Create a case (receptionist intake)
curl -X POST http://localhost:8080/api/v1/agentic/cases \
  -H "Content-Type: application/json" \
  -d '{"raw_input": "Add contract testing to CI pipeline"}'

# Execute case (lawyer processes case)
curl -X POST http://localhost:8080/api/v1/agentic/cases/{case_id}/execute \
  -H "Content-Type: application/json" \
  -d '{"agent_role": "Executor", "task": "/execute"}'

# Get agent experience summary
curl http://localhost:8080/api/v1/agentic/experience
```

**Event Flow:**

1. **CaseCreated** â†’ Receptionist receives and categorizes input
2. **CaseCategorized** â†’ Case is filed with priority and metadata
3. **CaseReferenceGenerated** â†’ Reference documents and workflow created
4. **CaseExecuted** â†’ Agent processes the case with role-based execution
5. **CaseCompleted** â†’ Case is completed with outcome and experience data

See [`docs/AGENTIC_SYSTEM_USAGE.md`](docs/AGENTIC_SYSTEM_USAGE.md) for complete usage instructions and [`docs/AGENTIC_SYSTEM.md`](docs/AGENTIC_SYSTEM.md) for system documentation.

### ğŸ•¸ï¸ Unified Fabric & Watchmaker Mechanism (NEW)

The Unified Fabric provides a high-performance, asynchronous event bus and a distributed AI Safety bridge that connects GRID cognitive analysis with Coinbase financial execution.

**Key Features:**
- **AISafetyBridge**: Distributes safety validation from `wellness_studio` to all `E:/` projects.
- **Async Router Hooks**: De-blocks synchronous GRID routers with non-blocking safety checks.
- **Revenue Pipeline**: Automated flow from trading signals to portfolio execution with multi-system auditing.

**Run the Watchmaker Scenario:**
```powershell
# Demonstrates the full dynamic flow (Analysis -> Safety -> Trading -> Revenue)
python example_scenario.py
```

See `src/unified_fabric/` for implementation details.


### Health Check System


```bash
# Check all MCP server health
curl http://localhost:8080/health

# Individual server health
curl http://localhost:8081/health  # Database MCP
curl http://localhost:8082/health  # Filesystem MCP
curl http://localhost:8083/health  # Memory MCP
```


```bash
# Development stack

# Production stack with security

# Override configuration
```

## Development Workflow

### CI/CD & Monitoring

We use GitHub Actions for CI/CD with comprehensive validation:

```bash
# Watch the latest CI run
make watch-ci

```

### Pre-Push Validation

Optimized pre-push hook ensures:

1. **Brain Integrity**: Validates `seed/topics_seed.json` structure
2. **Core Logic**: Runs fast unit tests (122+ passing)
3. **Hygiene**: Checks for large artifacts

### Tooling

- **Ruff**: Fast Python linter (`uv run ruff check .`)
- **Black**: Code formatter (`uv run black .`)
- **Pyright**: Type checker (`uv run pyright .`)
- **Pytest**: Test runner (`uv run pytest tests/`)

**VS Code Tasks** (Ctrl+Shift+P â†’ "Run Task"):

- `ğŸ§ª Tests Â· Run All` - Full test suite with coverage
- `âœ… IDE Â· Validate Context` - Environment validation
- `ğŸ” RAG Â· Query` - Query knowledge base
- `ğŸ“Š RAG Â· Index Docs` - Rebuild documentation index
- `ğŸ›°ï¸ PULSAR Â· Dashboard` - System vitals dashboard

## Performance & Quality

### Test Coverage

- **168+ tests passing** across unit, integration, and agentic systems (31 new auth/billing tests)
- **100% pass rate** for new Unified Fabric core modules
- **Comprehensive coverage** for core intelligence, agentic system, and DDD patterns
- **CI/CD pipeline** with automated validation and deployment

### Performance Benchmarks

| Metric        | Before        | After         | Improvement |
| :------------ | :------------ | :------------ | :---------- |
| `cache_ops`   | 1,446 ops/sec | 7,281 ops/sec | **5x**      |
| `eviction`    | 36 ops/sec    | 6,336 ops/sec | **175x**    |
| `honor_decay` | 5,628 ops/sec | 3.1M ops/sec  | **550x**    |

## Documentation

### Core Documentation

- [`docs/WHAT_CAN_I_DO.md`](docs/WHAT_CAN_I_DO.md) - Complete capability overview
- [`docs/USER_ENGAGEMENT_GUIDE.md`](docs/USER_ENGAGEMENT_GUIDE.md) - User engagement & tailored experience
- [`docs/SKILLS_RAG_QUICKSTART.md`](docs/SKILLS_RAG_QUICKSTART.md) - Skills and RAG system guide
- [`docs/AGENTIC_SYSTEM.md`](docs/AGENTIC_SYSTEM.md) - Agentic system documentation
- [`docs/AGENTIC_SYSTEM_USAGE.md`](docs/AGENTIC_SYSTEM_USAGE.md) - Agentic system usage guide

### Architecture & Security

- [`docs/ARCHITECTURE.md`](docs/ARCHITECTURE.md) - **Complete architecture documentation with detailed Mermaid diagrams**
- [`docs/ARCHITECTURE_VISUAL_GUIDE.md`](docs/ARCHITECTURE_VISUAL_GUIDE.md) - **Visual quick reference guide for rapid understanding**
- [`docs/security/SECURITY_ARCHITECTURE.md`](docs/security/SECURITY_ARCHITECTURE.md) - Security architecture
- [`docs/EVENT_DRIVEN_ARCHITECTURE.md`](docs/EVENT_DRIVEN_ARCHITECTURE.md) - Event-driven design patterns
- [`docs/PERFORMANCE_OPTIMIZATION.md`](docs/PERFORMANCE_OPTIMIZATION.md) - Performance optimization guide

### Development Guides

- [`docs/structure/README.md`](docs/structure/README.md) - Repository structure guide
- [`docs/CLEANUP_SUMMARY.md`](docs/CLEANUP_SUMMARY.md) - Recent cleanup and reorganization
- [`SAFE_MERGES_COMPLETED.md`](SAFE_MERGES_COMPLETED.md) - Merge strategy and completion report

## License

MIT License - See [LICENSE](LICENSE) for details.

---

**GRID is now more organized, capable, and production-ready than ever! ğŸš€**
